<div class="user-dashboard-card">
  <div class="top-right-badge">
    <span *ngIf="userAchievements && userAchievements.length > 0">
      {{ userAchievements[userAchievements.length - 1].name }} ğŸ†
    </span>
    <span *ngIf="!userAchievements || userAchievements.length === 0">
      ×›×•×›×‘ ××ª×—×™×œ âœ¨
    </span>
  </div>

  <div class="profile-header">
    <div class="profile-picture-container">
      <ng-container *ngIf="user?.profilePictureUrl; else defaultProfileIcon">
        <img
          [src]="user.profilePictureUrl"
          alt="×¤×¨×•×¤×™×œ ××©×ª××©"
          class="profile-picture"
          (error)="onImageError($event)"
        />
      </ng-container>
      <ng-template #defaultProfileIcon>
        <span class="default-icon">ğŸ‘¦</span>
      </ng-template>
    </div>
    <h2>×©×œ×•×, <span class="username">{{ user?.username }}!</span></h2>
  </div>

  <div class="stats-grid">
    <div class="stat-card points-card">
      <div class="icon-container">
        <span>ğŸ’</span>
      </div>
      <span class="stat-label">× ×§×•×“×•×ª</span>
      <strong class="stat-value">{{ user?.totalPoints }}</strong>
    </div>

    <div class="stat-card age-card">
      <div class="icon-container">
        <span>ğŸ‚</span>
      !      </div>
      <span class="stat-label">×”×’×™×œ ×©×œ×™</span>
      <strong class="stat-value">{{ user?.age }}</strong>
    </div>

    <div class="stat-card missions-card">
      <div class="icon-container">
        <span>ğŸ¯</span>
      </div>
      <span class="stat-label">××©×™××•×ª</span>
      <strong class="stat-value">{{ user?.completedMissions || '0' }}/{{ user?.totalMissions || '10' }}</strong>
    </div>

    <div class="stat-card level-card">
      <div class="icon-container">
        <span>ğŸš€</span>
      </div>
      <span class="stat-label">×¨××”</span>
      <strong class="stat-value">{{ user?.level }}</strong>
    </div>
  </div>

  <div class="progress-section">
    <label class="progress-label">
      <span>ğŸ‘ï¸</span>
      ×”×ª×§×“××•×ª ×œ×¨××” ×”×‘××”
    </label>
    <div class="progress-bar-wrapper">
      <progress [value]="user?.totalPoints" [max]="user?.pointsForNextLevel || 100"></progress>
      <span class="progress-value-text">
        {{ user?.totalPoints }} / {{ user?.pointsForNextLevel || 100 }} × ×§×•×“×•×ª ×œ×¨××” {{ user?.level + 1 || '' }}
      </span>
    </div>
  </div>

  <button class="toggle-achievements-button" (click)="toggleAchievementsList()">
    {{ showAchievementsList ? '×”×¡×ª×¨ ×”×™×©×’×™× â¬†ï¸' : '×”×”×™×©×’×™× ×©×œ×™ â¬‡ï¸' }}
  </button>

  <div *ngIf="showAchievementsList" class="achievements-display-section">
    <app-user-achievement [userAchievements]="userAchievements" [nextUserAchievements]="nextUserAchievements"></app-user-achievement>
  </div>
</div>